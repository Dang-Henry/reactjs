{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateAction = exports.validateProps = void 0;\nvar actions_1 = require(\"../../actions\");\nvar type_validate_1 = require(\"../type-validate\");\nvar utils_1 = require(\"../utils\");\nvar link_1 = require(\"./link\");\nvar linkOptionsValidator = type_validate_1.matchesObject({\n  id: type_validate_1.matchesString(),\n  options: link_1.linkPropsSchema\n});\nfunction activeLinkError(value) {\n  return [{\n    error: 'invalid_active_item',\n    value: value,\n    message: 'expected active item to exist in menu items'\n  }];\n}\nfunction getOptionsSchema(options) {\n  var baseSchema = type_validate_1.matchesObject({\n    items: type_validate_1.makeOptional(type_validate_1.matchesArray(linkOptionsValidator)),\n    active: type_validate_1.makeOptional(linkOptionsValidator)\n  });\n  var items = options.items,\n    active = options.active;\n  if (items && active) {\n    var activeItemSchema = type_validate_1.matchesObject({\n      active: type_validate_1.composeSchemas(linkOptionsValidator, function (value) {\n        return items.find(function (item) {\n          return item.id === value.id;\n        }) ? undefined : activeLinkError(value);\n      })\n    });\n    return type_validate_1.composeSchemas(baseSchema, activeItemSchema);\n  }\n  return baseSchema;\n}\nfunction getPayloadSchema(payload) {\n  var baseSchema = type_validate_1.matchesObject({\n    items: type_validate_1.makeOptional(type_validate_1.matchesArray(link_1.linkActionSchema)),\n    active: type_validate_1.makeOptional(type_validate_1.matchesString())\n  });\n  var items = payload.items,\n    active = payload.active;\n  if (items && active) {\n    var activeItemSchema = type_validate_1.matchesObject({\n      active: type_validate_1.composeSchemas(type_validate_1.matchesString(), function (value) {\n        return items.find(function (item) {\n          return item.id === value;\n        }) ? undefined : activeLinkError(value);\n      })\n    });\n    return type_validate_1.composeSchemas(baseSchema, activeItemSchema);\n  }\n  return baseSchema;\n}\nfunction validateProps(props) {\n  var result = type_validate_1.validate(props, getOptionsSchema(props));\n  return result;\n}\nexports.validateProps = validateProps;\nfunction validateAction(action) {\n  var actionType = actions_1.NavigationMenu.ActionType;\n  if (action.type === actions_1.ChannelMenu.ActionType.LINK_UPDATE || action.type === actions_1.ChannelMenu.ActionType.UPDATE) {\n    actionType = actions_1.ChannelMenu.ActionType;\n  }\n  return type_validate_1.validate(action, utils_1.createActionValidator(actionType, getPayloadSchema(action.payload), true, false));\n}\nexports.validateAction = validateAction;","map":{"version":3,"names":["Object","defineProperty","exports","value","validateAction","validateProps","actions_1","require","type_validate_1","utils_1","link_1","linkOptionsValidator","matchesObject","id","matchesString","options","linkPropsSchema","activeLinkError","error","message","getOptionsSchema","baseSchema","items","makeOptional","matchesArray","active","activeItemSchema","composeSchemas","find","item","undefined","getPayloadSchema","payload","linkActionSchema","props","result","validate","action","actionType","NavigationMenu","ActionType","type","ChannelMenu","LINK_UPDATE","UPDATE","createActionValidator"],"sources":["/Users/huandang/Documents/1.Develop/1.1.ProjectGithub/reactjs/node_modules/@shopify/app-bridge/validate/actions/menu.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAction = exports.validateProps = void 0;\nvar actions_1 = require(\"../../actions\");\nvar type_validate_1 = require(\"../type-validate\");\nvar utils_1 = require(\"../utils\");\nvar link_1 = require(\"./link\");\nvar linkOptionsValidator = type_validate_1.matchesObject({ id: type_validate_1.matchesString(), options: link_1.linkPropsSchema });\nfunction activeLinkError(value) {\n    return [\n        {\n            error: 'invalid_active_item',\n            value: value,\n            message: 'expected active item to exist in menu items',\n        },\n    ];\n}\nfunction getOptionsSchema(options) {\n    var baseSchema = type_validate_1.matchesObject({\n        items: type_validate_1.makeOptional(type_validate_1.matchesArray(linkOptionsValidator)),\n        active: type_validate_1.makeOptional(linkOptionsValidator),\n    });\n    var items = options.items, active = options.active;\n    if (items && active) {\n        var activeItemSchema = type_validate_1.matchesObject({\n            active: type_validate_1.composeSchemas(linkOptionsValidator, function (value) {\n                return items.find(function (item) { return item.id === value.id; }) ? undefined : activeLinkError(value);\n            }),\n        });\n        return type_validate_1.composeSchemas(baseSchema, activeItemSchema);\n    }\n    return baseSchema;\n}\nfunction getPayloadSchema(payload) {\n    var baseSchema = type_validate_1.matchesObject({\n        items: type_validate_1.makeOptional(type_validate_1.matchesArray(link_1.linkActionSchema)),\n        active: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    });\n    var items = payload.items, active = payload.active;\n    if (items && active) {\n        var activeItemSchema = type_validate_1.matchesObject({\n            active: type_validate_1.composeSchemas(type_validate_1.matchesString(), function (value) {\n                return items.find(function (item) { return item.id === value; })\n                    ? undefined\n                    : activeLinkError(value);\n            }),\n        });\n        return type_validate_1.composeSchemas(baseSchema, activeItemSchema);\n    }\n    return baseSchema;\n}\nfunction validateProps(props) {\n    var result = type_validate_1.validate(props, getOptionsSchema(props));\n    return result;\n}\nexports.validateProps = validateProps;\nfunction validateAction(action) {\n    var actionType = actions_1.NavigationMenu.ActionType;\n    if (action.type === actions_1.ChannelMenu.ActionType.LINK_UPDATE ||\n        action.type === actions_1.ChannelMenu.ActionType.UPDATE) {\n        actionType = actions_1.ChannelMenu.ActionType;\n    }\n    return type_validate_1.validate(action, utils_1.createActionValidator(actionType, getPayloadSchema(action.payload), true, false));\n}\nexports.validateAction = validateAction;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}