{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateAction = exports.getSectionSchema = exports.matchesAbsolutePath = void 0;\nvar actions_1 = require(\"../../actions\");\nvar type_validate_1 = require(\"../type-validate\");\nvar utils_1 = require(\"../utils\");\nfunction matchesAbsolutePath(value) {\n  return value.match('^https?://') ? undefined : [{\n    value: value,\n    error: 'invalid_absolute_url',\n    message: 'expected string to start with `https://` or `http://`'\n  }];\n}\nexports.matchesAbsolutePath = matchesAbsolutePath;\nfunction getSectionSchema(payload) {\n  var isProductVariant = payload && payload.section && payload.section.resource && payload.section.name === actions_1.Redirect.ResourceType.Product;\n  var resourceSchema = {\n    create: type_validate_1.makeOptional(type_validate_1.matchesBoolean()),\n    id: type_validate_1.makeOptional(type_validate_1.matchesString())\n  };\n  var productVariantSchema = __assign(__assign({}, resourceSchema), {\n    variant: type_validate_1.makeOptional(type_validate_1.matchesObject(resourceSchema))\n  });\n  return type_validate_1.matchesObject({\n    section: type_validate_1.matchesObject({\n      name: type_validate_1.matchesEnum(actions_1.Redirect.ResourceType),\n      resource: type_validate_1.makeOptional(type_validate_1.matchesObject(isProductVariant ? productVariantSchema : resourceSchema))\n    })\n  });\n}\nexports.getSectionSchema = getSectionSchema;\nfunction validateAction(action) {\n  var newContextSchema = type_validate_1.matchesObject({\n    newContext: type_validate_1.makeOptional(type_validate_1.matchesBoolean())\n  });\n  var actionType = actions_1.Redirect.ActionType;\n  var schema;\n  switch (action.type) {\n    case actions_1.History.ActionType.PUSH:\n    case actions_1.History.ActionType.REPLACE:\n      actionType = actions_1.History.ActionType;\n      schema = utils_1.relativePathSchema;\n      break;\n    case actions_1.Redirect.ActionType.APP:\n      schema = utils_1.relativePathSchema;\n      break;\n    case actions_1.Redirect.ActionType.REMOTE:\n      schema = type_validate_1.composeSchemas(type_validate_1.matchesObject({\n        url: type_validate_1.composeSchemas(type_validate_1.matchesString(), function (value) {\n          return matchesAbsolutePath(value);\n        })\n      }), newContextSchema);\n      break;\n    case actions_1.Redirect.ActionType.ADMIN_PATH:\n      schema = type_validate_1.composeSchemas(utils_1.relativePathSchema, newContextSchema);\n      break;\n    case actions_1.Redirect.ActionType.ADMIN_SECTION:\n      schema = type_validate_1.composeSchemas(getSectionSchema(action.payload), newContextSchema);\n      break;\n  }\n  return type_validate_1.validate(action, utils_1.createActionValidator(actionType, schema));\n}\nexports.validateAction = validateAction;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","validateAction","getSectionSchema","matchesAbsolutePath","actions_1","require","type_validate_1","utils_1","match","undefined","error","message","payload","isProductVariant","section","resource","name","Redirect","ResourceType","Product","resourceSchema","create","makeOptional","matchesBoolean","id","matchesString","productVariantSchema","variant","matchesObject","matchesEnum","action","newContextSchema","newContext","actionType","ActionType","schema","type","History","PUSH","REPLACE","relativePathSchema","APP","REMOTE","composeSchemas","url","ADMIN_PATH","ADMIN_SECTION","validate","createActionValidator"],"sources":["/Users/huandang/Documents/1.Develop/1.1.ProjectGithub/reactjs/node_modules/@shopify/app-bridge/validate/actions/navigation.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAction = exports.getSectionSchema = exports.matchesAbsolutePath = void 0;\nvar actions_1 = require(\"../../actions\");\nvar type_validate_1 = require(\"../type-validate\");\nvar utils_1 = require(\"../utils\");\nfunction matchesAbsolutePath(value) {\n    return value.match('^https?://')\n        ? undefined\n        : [\n            {\n                value: value,\n                error: 'invalid_absolute_url',\n                message: 'expected string to start with `https://` or `http://`',\n            },\n        ];\n}\nexports.matchesAbsolutePath = matchesAbsolutePath;\nfunction getSectionSchema(payload) {\n    var isProductVariant = payload &&\n        payload.section &&\n        payload.section.resource &&\n        payload.section.name === actions_1.Redirect.ResourceType.Product;\n    var resourceSchema = {\n        create: type_validate_1.makeOptional(type_validate_1.matchesBoolean()),\n        id: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    };\n    var productVariantSchema = __assign(__assign({}, resourceSchema), { variant: type_validate_1.makeOptional(type_validate_1.matchesObject(resourceSchema)) });\n    return type_validate_1.matchesObject({\n        section: type_validate_1.matchesObject({\n            name: type_validate_1.matchesEnum(actions_1.Redirect.ResourceType),\n            resource: type_validate_1.makeOptional(type_validate_1.matchesObject(isProductVariant ? productVariantSchema : resourceSchema)),\n        }),\n    });\n}\nexports.getSectionSchema = getSectionSchema;\nfunction validateAction(action) {\n    var newContextSchema = type_validate_1.matchesObject({ newContext: type_validate_1.makeOptional(type_validate_1.matchesBoolean()) });\n    var actionType = actions_1.Redirect.ActionType;\n    var schema;\n    switch (action.type) {\n        case actions_1.History.ActionType.PUSH:\n        case actions_1.History.ActionType.REPLACE:\n            actionType = actions_1.History.ActionType;\n            schema = utils_1.relativePathSchema;\n            break;\n        case actions_1.Redirect.ActionType.APP:\n            schema = utils_1.relativePathSchema;\n            break;\n        case actions_1.Redirect.ActionType.REMOTE:\n            schema = type_validate_1.composeSchemas(type_validate_1.matchesObject({\n                url: type_validate_1.composeSchemas(type_validate_1.matchesString(), function (value) { return matchesAbsolutePath(value); }),\n            }), newContextSchema);\n            break;\n        case actions_1.Redirect.ActionType.ADMIN_PATH:\n            schema = type_validate_1.composeSchemas(utils_1.relativePathSchema, newContextSchema);\n            break;\n        case actions_1.Redirect.ActionType.ADMIN_SECTION:\n            schema = type_validate_1.composeSchemas(getSectionSchema(action.payload), newContextSchema);\n            break;\n    }\n    return type_validate_1.validate(action, utils_1.createActionValidator(actionType, schema));\n}\nexports.validateAction = validateAction;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}