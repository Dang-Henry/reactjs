{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar collection_1 = require(\"../util/collection\");\n/**\n * Shopify App Bridge can be extended with hooks, which run when actions are dispatched and updated.\n * Hooks are middleware functions that can modify or cancel actions.\n *\n * The [validation middleware](../validate/README.md) is implemented using hooks.\n *\n * @remarks\n * Here’s an example hook that modifies all Toast show actions to have a duration of five seconds.\n *\n * ```ts\n * import createApp, {LifecycleHook, DispatchActionHook} from '@shopify/app-bridge';\n * import {Toast} from '@shopify/app-bridge/actions'\n *\n * const app = createApp({apiKey: API_KEY, shopOrigin: SHOP_ORIGIN});\n *\n * function makeToastsFiveSeconds: DispatchActionHook(next) {\n *   return function(action){\n *       if(action.type === Toast.ActionType.SHOW) {\n *         const modifiedAction = {\n *           ...action,\n *           payload: {\n *             ...action.payload,\n *             duration: 5000,\n *           },\n *         };\n *         return next(modifiedAction);\n *       } else {\n *         // don’t modify non-Toast actions\n *         return next(action);\n *       }\n *   }\n * }\n *\n * app.hooks.set(LifecycleHook.DispatchAction, makeToastsFiveSeconds);\n * ```\n *\n * The hook function `makeToastsFiveSeconds()` takes a `next()` function as its argument.\n * The hook function returns an anonymous function, which takes the action being dispatched as its argument.\n *\n * To modify an action, call `next()` with the modified action, as in the example.\n * To cancel an action, don’t call `next()`, and the action will not be dispatched.\n */\nvar Hooks = /** @class */function () {\n  function Hooks() {\n    this.map = {};\n  }\n  Hooks.prototype.set = function (hook, handler) {\n    if (!this.map.hasOwnProperty(hook)) {\n      this.map[hook] = [];\n    }\n    var value = {\n      handler: handler,\n      remove: function () {}\n    };\n    var remove = collection_1.addAndRemoveFromCollection(this.map[hook], value);\n    value = {\n      handler: handler,\n      remove: remove\n    };\n    return remove;\n  };\n  Hooks.prototype.get = function (hook) {\n    var value = this.map[hook];\n    return value ? value.map(function (val) {\n      return val.handler;\n    }) : undefined;\n  };\n  Hooks.prototype.run = function (hook, final, context) {\n    var initialArgs = [];\n    for (var _i = 3; _i < arguments.length; _i++) {\n      initialArgs[_i - 3] = arguments[_i];\n    }\n    var index = 0;\n    var handlers = this.get(hook) || [];\n    function handler() {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      var childHandler = handlers[index++];\n      if (childHandler) {\n        return childHandler(handler).apply(context, args);\n      }\n      return final.apply(context, args);\n    }\n    return handler.apply(context, initialArgs);\n  };\n  return Hooks;\n}();\nexports.default = Hooks;","map":{"version":3,"names":["Object","defineProperty","exports","value","collection_1","require","Hooks","map","prototype","set","hook","handler","hasOwnProperty","remove","addAndRemoveFromCollection","get","val","undefined","run","final","context","initialArgs","_i","arguments","length","index","handlers","args","childHandler","apply","default"],"sources":["/Users/huandang/Documents/1.Develop/1.1.ProjectGithub/reactjs/node_modules/@shopify/app-bridge/client/Hooks.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar collection_1 = require(\"../util/collection\");\n/**\n * Shopify App Bridge can be extended with hooks, which run when actions are dispatched and updated.\n * Hooks are middleware functions that can modify or cancel actions.\n *\n * The [validation middleware](../validate/README.md) is implemented using hooks.\n *\n * @remarks\n * Here’s an example hook that modifies all Toast show actions to have a duration of five seconds.\n *\n * ```ts\n * import createApp, {LifecycleHook, DispatchActionHook} from '@shopify/app-bridge';\n * import {Toast} from '@shopify/app-bridge/actions'\n *\n * const app = createApp({apiKey: API_KEY, shopOrigin: SHOP_ORIGIN});\n *\n * function makeToastsFiveSeconds: DispatchActionHook(next) {\n *   return function(action){\n *       if(action.type === Toast.ActionType.SHOW) {\n *         const modifiedAction = {\n *           ...action,\n *           payload: {\n *             ...action.payload,\n *             duration: 5000,\n *           },\n *         };\n *         return next(modifiedAction);\n *       } else {\n *         // don’t modify non-Toast actions\n *         return next(action);\n *       }\n *   }\n * }\n *\n * app.hooks.set(LifecycleHook.DispatchAction, makeToastsFiveSeconds);\n * ```\n *\n * The hook function `makeToastsFiveSeconds()` takes a `next()` function as its argument.\n * The hook function returns an anonymous function, which takes the action being dispatched as its argument.\n *\n * To modify an action, call `next()` with the modified action, as in the example.\n * To cancel an action, don’t call `next()`, and the action will not be dispatched.\n */\nvar Hooks = /** @class */ (function () {\n    function Hooks() {\n        this.map = {};\n    }\n    Hooks.prototype.set = function (hook, handler) {\n        if (!this.map.hasOwnProperty(hook)) {\n            this.map[hook] = [];\n        }\n        var value = { handler: handler, remove: function () { } };\n        var remove = collection_1.addAndRemoveFromCollection(this.map[hook], value);\n        value = { handler: handler, remove: remove };\n        return remove;\n    };\n    Hooks.prototype.get = function (hook) {\n        var value = this.map[hook];\n        return value ? value.map(function (val) { return val.handler; }) : undefined;\n    };\n    Hooks.prototype.run = function (hook, final, context) {\n        var initialArgs = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            initialArgs[_i - 3] = arguments[_i];\n        }\n        var index = 0;\n        var handlers = this.get(hook) || [];\n        function handler() {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            var childHandler = handlers[index++];\n            if (childHandler) {\n                return childHandler(handler).apply(context, args);\n            }\n            return final.apply(context, args);\n        }\n        return handler.apply(context, initialArgs);\n    };\n    return Hooks;\n}());\nexports.default = Hooks;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}