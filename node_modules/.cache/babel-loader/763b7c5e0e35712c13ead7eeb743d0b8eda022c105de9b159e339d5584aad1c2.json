{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAppMessage = exports.isPermitted = exports.getPermissionKey = exports.isFromApp = exports.isAppBridgeAction = void 0;\nvar types_1 = require(\"../client/types\");\nvar constants_1 = require(\"./constants\");\nvar helper_1 = require(\"./helper\");\n/**\n * Predicate to determine if an action is an App Bridge action.\n * @public\n */\nfunction isAppBridgeAction(action) {\n  return action instanceof Object && action.hasOwnProperty('type') && action.type.toString().startsWith(constants_1.PREFIX);\n}\nexports.isAppBridgeAction = isAppBridgeAction;\n/**\n * Predicate to determine if an action originated from an application.\n * @internal\n */\nfunction isFromApp(action) {\n  if (typeof action !== 'object' || typeof action.source !== 'object') {\n    return false;\n  }\n  return typeof action.source.apiKey === 'string';\n}\nexports.isFromApp = isFromApp;\n/**\n * Returns the action type without the prefix and group\n * @internal\n */\nfunction getPermissionKey(type) {\n  return type.replace(new RegExp(\"^\" + constants_1.PREFIX + constants_1.SEPARATOR + \"\\\\w+\" + constants_1.SEPARATOR), '');\n}\nexports.getPermissionKey = getPermissionKey;\n/**\n * Predicate to determine if an action is permitted\n * @internal\n */\nfunction isPermitted(features, _a, permissionType) {\n  var group = _a.group,\n    type = _a.type;\n  if (!group || !features.hasOwnProperty(group)) {\n    return false;\n  }\n  var feature = features[group];\n  if (!feature) {\n    return false;\n  }\n  var actionType = getPermissionKey(type);\n  return feature[actionType] ? feature[actionType][permissionType] === true : false;\n}\nexports.isPermitted = isPermitted;\n/**\n * Predicate to determine if an event originated from an application.\n * @internal\n */\nfunction isAppMessage(event) {\n  if (typeof event !== 'object' || !event.data || typeof event.data !== 'object') {\n    return false;\n  }\n  var data = event.data;\n  return data.hasOwnProperty('type') && helper_1.findMatchInEnum(types_1.MessageType, data.type) !== undefined;\n}\nexports.isAppMessage = isAppMessage;","map":{"version":3,"names":["Object","defineProperty","exports","value","isAppMessage","isPermitted","getPermissionKey","isFromApp","isAppBridgeAction","types_1","require","constants_1","helper_1","action","hasOwnProperty","type","toString","startsWith","PREFIX","source","apiKey","replace","RegExp","SEPARATOR","features","_a","permissionType","group","feature","actionType","event","data","findMatchInEnum","MessageType","undefined"],"sources":["/Users/huandang/Documents/1.Develop/1.1.ProjectGithub/reactjs/node_modules/@shopify/app-bridge/actions/validator.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isAppMessage = exports.isPermitted = exports.getPermissionKey = exports.isFromApp = exports.isAppBridgeAction = void 0;\nvar types_1 = require(\"../client/types\");\nvar constants_1 = require(\"./constants\");\nvar helper_1 = require(\"./helper\");\n/**\n * Predicate to determine if an action is an App Bridge action.\n * @public\n */\nfunction isAppBridgeAction(action) {\n    return (action instanceof Object &&\n        action.hasOwnProperty('type') &&\n        action.type.toString().startsWith(constants_1.PREFIX));\n}\nexports.isAppBridgeAction = isAppBridgeAction;\n/**\n * Predicate to determine if an action originated from an application.\n * @internal\n */\nfunction isFromApp(action) {\n    if (typeof action !== 'object' || typeof action.source !== 'object') {\n        return false;\n    }\n    return typeof action.source.apiKey === 'string';\n}\nexports.isFromApp = isFromApp;\n/**\n * Returns the action type without the prefix and group\n * @internal\n */\nfunction getPermissionKey(type) {\n    return type.replace(new RegExp(\"^\" + constants_1.PREFIX + constants_1.SEPARATOR + \"\\\\w+\" + constants_1.SEPARATOR), '');\n}\nexports.getPermissionKey = getPermissionKey;\n/**\n * Predicate to determine if an action is permitted\n * @internal\n */\nfunction isPermitted(features, _a, permissionType) {\n    var group = _a.group, type = _a.type;\n    if (!group || !features.hasOwnProperty(group)) {\n        return false;\n    }\n    var feature = features[group];\n    if (!feature) {\n        return false;\n    }\n    var actionType = getPermissionKey(type);\n    return feature[actionType] ? feature[actionType][permissionType] === true : false;\n}\nexports.isPermitted = isPermitted;\n/**\n * Predicate to determine if an event originated from an application.\n * @internal\n */\nfunction isAppMessage(event) {\n    if (typeof event !== 'object' || !event.data || typeof event.data !== 'object') {\n        return false;\n    }\n    var data = event.data;\n    return data.hasOwnProperty('type') && helper_1.findMatchInEnum(types_1.MessageType, data.type) !== undefined;\n}\nexports.isAppMessage = isAppMessage;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,YAAY,GAAGF,OAAO,CAACG,WAAW,GAAGH,OAAO,CAACI,gBAAgB,GAAGJ,OAAO,CAACK,SAAS,GAAGL,OAAO,CAACM,iBAAiB,GAAG,KAAK,CAAC;AAC9H,IAAIC,OAAO,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AACxC,IAAIC,WAAW,GAAGD,OAAO,CAAC,aAAa,CAAC;AACxC,IAAIE,QAAQ,GAAGF,OAAO,CAAC,UAAU,CAAC;AAClC;AACA;AACA;AACA;AACA,SAASF,iBAAiBA,CAACK,MAAM,EAAE;EAC/B,OAAQA,MAAM,YAAYb,MAAM,IAC5Ba,MAAM,CAACC,cAAc,CAAC,MAAM,CAAC,IAC7BD,MAAM,CAACE,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,UAAU,CAACN,WAAW,CAACO,MAAM,CAAC;AAC7D;AACAhB,OAAO,CAACM,iBAAiB,GAAGA,iBAAiB;AAC7C;AACA;AACA;AACA;AACA,SAASD,SAASA,CAACM,MAAM,EAAE;EACvB,IAAI,OAAOA,MAAM,KAAK,QAAQ,IAAI,OAAOA,MAAM,CAACM,MAAM,KAAK,QAAQ,EAAE;IACjE,OAAO,KAAK;EAChB;EACA,OAAO,OAAON,MAAM,CAACM,MAAM,CAACC,MAAM,KAAK,QAAQ;AACnD;AACAlB,OAAO,CAACK,SAAS,GAAGA,SAAS;AAC7B;AACA;AACA;AACA;AACA,SAASD,gBAAgBA,CAACS,IAAI,EAAE;EAC5B,OAAOA,IAAI,CAACM,OAAO,CAAC,IAAIC,MAAM,CAAC,GAAG,GAAGX,WAAW,CAACO,MAAM,GAAGP,WAAW,CAACY,SAAS,GAAG,MAAM,GAAGZ,WAAW,CAACY,SAAS,CAAC,EAAE,EAAE,CAAC;AAC1H;AACArB,OAAO,CAACI,gBAAgB,GAAGA,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,SAASD,WAAWA,CAACmB,QAAQ,EAAEC,EAAE,EAAEC,cAAc,EAAE;EAC/C,IAAIC,KAAK,GAAGF,EAAE,CAACE,KAAK;IAAEZ,IAAI,GAAGU,EAAE,CAACV,IAAI;EACpC,IAAI,CAACY,KAAK,IAAI,CAACH,QAAQ,CAACV,cAAc,CAACa,KAAK,CAAC,EAAE;IAC3C,OAAO,KAAK;EAChB;EACA,IAAIC,OAAO,GAAGJ,QAAQ,CAACG,KAAK,CAAC;EAC7B,IAAI,CAACC,OAAO,EAAE;IACV,OAAO,KAAK;EAChB;EACA,IAAIC,UAAU,GAAGvB,gBAAgB,CAACS,IAAI,CAAC;EACvC,OAAOa,OAAO,CAACC,UAAU,CAAC,GAAGD,OAAO,CAACC,UAAU,CAAC,CAACH,cAAc,CAAC,KAAK,IAAI,GAAG,KAAK;AACrF;AACAxB,OAAO,CAACG,WAAW,GAAGA,WAAW;AACjC;AACA;AACA;AACA;AACA,SAASD,YAAYA,CAAC0B,KAAK,EAAE;EACzB,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAI,CAACA,KAAK,CAACC,IAAI,IAAI,OAAOD,KAAK,CAACC,IAAI,KAAK,QAAQ,EAAE;IAC5E,OAAO,KAAK;EAChB;EACA,IAAIA,IAAI,GAAGD,KAAK,CAACC,IAAI;EACrB,OAAOA,IAAI,CAACjB,cAAc,CAAC,MAAM,CAAC,IAAIF,QAAQ,CAACoB,eAAe,CAACvB,OAAO,CAACwB,WAAW,EAAEF,IAAI,CAAChB,IAAI,CAAC,KAAKmB,SAAS;AAChH;AACAhC,OAAO,CAACE,YAAY,GAAGA,YAAY","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}