{"ast":null,"code":"\"use strict\";\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validatorMiddleware = exports.connectValidatorToDispatchHook = exports.connectValidatorToUpdateHook = void 0;\nvar client_1 = require(\"../client\");\nvar types_1 = require(\"../actions/types\");\nvar Error_1 = require(\"../actions/Error\");\nvar helper_1 = require(\"../actions/helper\");\nvar actions_1 = require(\"./actions\");\nvar type_validate_1 = require(\"./type-validate\");\nvar utils_1 = require(\"./utils\");\nfunction updateValidator(localOrigin, group, options) {\n  switch (group) {\n    case types_1.Group.Button:\n      return actions_1.Button.validateProps(options);\n    case types_1.Group.ButtonGroup:\n      return actions_1.ButtonGroup.validateProps(options);\n    case types_1.Group.Modal:\n      return actions_1.Modal.validateProps(options, localOrigin);\n    case types_1.Group.Menu:\n      return actions_1.Menu.validateProps(options);\n    case types_1.Group.Link:\n      return actions_1.Link.validateProps(options);\n    case types_1.Group.TitleBar:\n      return actions_1.TitleBar.validateProps(options);\n    case types_1.Group.ResourcePicker:\n      return actions_1.ResourcePicker.validateProps(options);\n    case types_1.Group.Toast:\n      return actions_1.Toast.validateProps(options);\n    case types_1.Group.ContextualSaveBar:\n      return actions_1.ContextualSaveBar.validateProps(options);\n  }\n}\nfunction dispatchPayloadValidator(action, localOrigin) {\n  switch (action.group) {\n    case types_1.Group.Button:\n      return actions_1.Button.validateAction(action);\n    case types_1.Group.ButtonGroup:\n      return actions_1.ButtonGroup.validateAction(action);\n    case types_1.Group.Modal:\n      return actions_1.Modal.validateAction(action, localOrigin);\n    case types_1.Group.Menu:\n      return actions_1.Menu.validateAction(action);\n    case types_1.Group.TitleBar:\n      return actions_1.TitleBar.validateAction(action);\n    case types_1.Group.ResourcePicker:\n      return actions_1.ResourcePicker.validateAction(action);\n    case types_1.Group.Loading:\n      return actions_1.Loading.validateAction(action);\n    case types_1.Group.Toast:\n      return actions_1.Toast.validateAction(action);\n    case types_1.Group.Cart:\n      return actions_1.Cart.validateAction(action);\n    case types_1.Group.Navigation:\n      return actions_1.Navigation.validateAction(action);\n    case types_1.Group.Print:\n      return actions_1.Print.validateAction(action);\n    case types_1.Group.Scanner:\n      return actions_1.Scanner.validateAction(action);\n    case types_1.Group.Fullscreen:\n      return actions_1.Fullscreen.validateAction(action);\n    case types_1.Group.ContextualSaveBar:\n      return actions_1.ContextualSaveBar.validateAction(action);\n    case types_1.Group.Link:\n      return actions_1.Link.validateAction(action);\n  }\n}\nfunction dispatchValidator(action, origin) {\n  var errors = type_validate_1.validate(action, type_validate_1.matchesObject({\n    group: type_validate_1.matchesEnum(types_1.Group, {\n      message: function (_, value) {\n        return \"Unknown or unsupported action group `\" + value + \"`\";\n      }\n    }),\n    version: type_validate_1.matchesString()\n  }));\n  if (errors) {\n    return Error_1.invalidAction(action, utils_1.actionMessage(errors));\n  }\n  var payloadErrors = dispatchPayloadValidator(action, origin);\n  return payloadErrors ? Error_1.invalidPayload(action, utils_1.actionMessage(payloadErrors)) : action;\n}\nexports.connectValidatorToUpdateHook = function (next) {\n  return function (options) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n    // The group should be staticly set to the default initial group as certain components\n    // (ex. Button and ButtonGroup) can be dynamically grouped under a new group (ex. TitleBar)\n    // We accept partial options so the validator should be called on merged new and old options\n    var mergedOptions = helper_1.getMergedProps(this.options, options);\n    var errors = updateValidator(this.app.localOrigin, this.defaultGroup, mergedOptions);\n    if (errors) {\n      throw Error_1.fromAction(utils_1.actionMessage(errors), Error_1.ActionType.INVALID_OPTIONS);\n    }\n    return next.apply(void 0, __spreadArrays([options], args));\n  };\n};\nexports.connectValidatorToDispatchHook = function (next) {\n  return function (action) {\n    var finalAction = dispatchValidator(action, this.localOrigin);\n    return next(finalAction);\n  };\n};\nexports.validatorMiddleware = function (hooks) {\n  hooks.set(client_1.LifecycleHook.UpdateAction, exports.connectValidatorToUpdateHook);\n  hooks.set(client_1.LifecycleHook.DispatchAction, exports.connectValidatorToDispatchHook);\n};","map":{"version":3,"names":["__spreadArrays","s","i","il","arguments","length","r","Array","k","a","j","jl","Object","defineProperty","exports","value","validatorMiddleware","connectValidatorToDispatchHook","connectValidatorToUpdateHook","client_1","require","types_1","Error_1","helper_1","actions_1","type_validate_1","utils_1","updateValidator","localOrigin","group","options","Group","Button","validateProps","ButtonGroup","Modal","Menu","Link","TitleBar","ResourcePicker","Toast","ContextualSaveBar","dispatchPayloadValidator","action","validateAction","Loading","Cart","Navigation","Print","Scanner","Fullscreen","dispatchValidator","origin","errors","validate","matchesObject","matchesEnum","message","_","version","matchesString","invalidAction","actionMessage","payloadErrors","invalidPayload","next","args","_i","mergedOptions","getMergedProps","app","defaultGroup","fromAction","ActionType","INVALID_OPTIONS","apply","finalAction","hooks","set","LifecycleHook","UpdateAction","DispatchAction"],"sources":["/Users/huandang/Documents/1.Develop/1.1.ProjectGithub/reactjs/node_modules/@shopify/app-bridge/validate/validator.js"],"sourcesContent":["\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validatorMiddleware = exports.connectValidatorToDispatchHook = exports.connectValidatorToUpdateHook = void 0;\nvar client_1 = require(\"../client\");\nvar types_1 = require(\"../actions/types\");\nvar Error_1 = require(\"../actions/Error\");\nvar helper_1 = require(\"../actions/helper\");\nvar actions_1 = require(\"./actions\");\nvar type_validate_1 = require(\"./type-validate\");\nvar utils_1 = require(\"./utils\");\nfunction updateValidator(localOrigin, group, options) {\n    switch (group) {\n        case types_1.Group.Button:\n            return actions_1.Button.validateProps(options);\n        case types_1.Group.ButtonGroup:\n            return actions_1.ButtonGroup.validateProps(options);\n        case types_1.Group.Modal:\n            return actions_1.Modal.validateProps(options, localOrigin);\n        case types_1.Group.Menu:\n            return actions_1.Menu.validateProps(options);\n        case types_1.Group.Link:\n            return actions_1.Link.validateProps(options);\n        case types_1.Group.TitleBar:\n            return actions_1.TitleBar.validateProps(options);\n        case types_1.Group.ResourcePicker:\n            return actions_1.ResourcePicker.validateProps(options);\n        case types_1.Group.Toast:\n            return actions_1.Toast.validateProps(options);\n        case types_1.Group.ContextualSaveBar:\n            return actions_1.ContextualSaveBar.validateProps(options);\n    }\n}\nfunction dispatchPayloadValidator(action, localOrigin) {\n    switch (action.group) {\n        case types_1.Group.Button:\n            return actions_1.Button.validateAction(action);\n        case types_1.Group.ButtonGroup:\n            return actions_1.ButtonGroup.validateAction(action);\n        case types_1.Group.Modal:\n            return actions_1.Modal.validateAction(action, localOrigin);\n        case types_1.Group.Menu:\n            return actions_1.Menu.validateAction(action);\n        case types_1.Group.TitleBar:\n            return actions_1.TitleBar.validateAction(action);\n        case types_1.Group.ResourcePicker:\n            return actions_1.ResourcePicker.validateAction(action);\n        case types_1.Group.Loading:\n            return actions_1.Loading.validateAction(action);\n        case types_1.Group.Toast:\n            return actions_1.Toast.validateAction(action);\n        case types_1.Group.Cart:\n            return actions_1.Cart.validateAction(action);\n        case types_1.Group.Navigation:\n            return actions_1.Navigation.validateAction(action);\n        case types_1.Group.Print:\n            return actions_1.Print.validateAction(action);\n        case types_1.Group.Scanner:\n            return actions_1.Scanner.validateAction(action);\n        case types_1.Group.Fullscreen:\n            return actions_1.Fullscreen.validateAction(action);\n        case types_1.Group.ContextualSaveBar:\n            return actions_1.ContextualSaveBar.validateAction(action);\n        case types_1.Group.Link:\n            return actions_1.Link.validateAction(action);\n    }\n}\nfunction dispatchValidator(action, origin) {\n    var errors = type_validate_1.validate(action, type_validate_1.matchesObject({\n        group: type_validate_1.matchesEnum(types_1.Group, {\n            message: function (_, value) { return \"Unknown or unsupported action group `\" + value + \"`\"; },\n        }),\n        version: type_validate_1.matchesString(),\n    }));\n    if (errors) {\n        return Error_1.invalidAction(action, utils_1.actionMessage(errors));\n    }\n    var payloadErrors = dispatchPayloadValidator(action, origin);\n    return payloadErrors ? Error_1.invalidPayload(action, utils_1.actionMessage(payloadErrors)) : action;\n}\nexports.connectValidatorToUpdateHook = function (next) {\n    return function (options) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        // The group should be staticly set to the default initial group as certain components\n        // (ex. Button and ButtonGroup) can be dynamically grouped under a new group (ex. TitleBar)\n        // We accept partial options so the validator should be called on merged new and old options\n        var mergedOptions = helper_1.getMergedProps(this.options, options);\n        var errors = updateValidator(this.app.localOrigin, this.defaultGroup, mergedOptions);\n        if (errors) {\n            throw Error_1.fromAction(utils_1.actionMessage(errors), Error_1.ActionType.INVALID_OPTIONS);\n        }\n        return next.apply(void 0, __spreadArrays([options], args));\n    };\n};\nexports.connectValidatorToDispatchHook = function (next) {\n    return function (action) {\n        var finalAction = dispatchValidator(action, this.localOrigin);\n        return next(finalAction);\n    };\n};\nexports.validatorMiddleware = function (hooks) {\n    hooks.set(client_1.LifecycleHook.UpdateAction, exports.connectValidatorToUpdateHook);\n    hooks.set(client_1.LifecycleHook.DispatchAction, exports.connectValidatorToDispatchHook);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}